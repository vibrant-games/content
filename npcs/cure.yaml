#
# Vibrant Games NPC file format.
#
# For long fields, we should be able to embed <html-tag>...</html-tag>s,
# if everyone is cool with that approach.  OR we could use markdown instead.
#
# HTML requires more discipline -- we need to come up with a CSS stylesheet,
# and stick to using the styles defined in our stylesheet.  Markdown is
# simpler, because we can convert and automagically apply the stylesheet.
#
# Long fields are of the form:
#
#     field: |
#       TEMPLATE
#       MORE TEMPLATE
#
# For example, with HTML tags:
#
#     field: |
#       <p> Gorbonzonger the goblin is a very bad goblin.
#       He likes to beat up kobolds. </p>
#       <p class="small"> Kobolds deserve it, anyway. </p>
#       <p> Gorbonzonger has an amulet made of camphor
#       and a very long shopping list that contains many
#       items, some very few of which include: </p>
#       <ul>
#       <li> toilet paper </li>
#       <li> broccoli </li>
#       </ul>
#
# Or with Markdown:
#
#     field: |
#       Gorbonzonger the goblin is a very bad goblin.  He likes to beat up kobolds.
#       Kobolds deserve it, anyway.
#       Gorbonzonger has an amulet made of camphor and a very long shopping list that contains many items, some very few of which include:
#       - toilet paper
#       - broccoli
#
# (There might be other formatting systems worth considering, too!)
#

#
# Currently there is no schema for this template.
# It will take some time to create a validating schema, so that,
# for example, many fields are optional, but some fields are
# required; enumerated fields are only allowed to have certain
# values; and so on.
#
# Once the validating schema is created (probably using
# Open API syntax, unless anyone has any preferences), we'll
# be able to validate submissions and accept / reject if we choose.
#
# Also the validating file format is the ONLY place we do
# content validation.  The database and user interface remain
# agnostic to the validation rules (although the submission
# UI will be set up to make it easy to e.g. pull down enumerated
# values).  This allows us to change the schema in ONE PLACE
# ONLY, not have to modify multiple components (UI, database,
# future mobile apps, etc).  The file format validator is
# the arbiter of what's allowed and what isn't.
#

#
# Template NPC:
#

---

#
# Preliminary fields that describe this overall file:
#
kind: vibrantgames.ca/npc
version: 0.0.2

#
# Information about who submitted the data, when, how, etc.:
#
metadata:
  #
  # A unique identified for this submission.
  # Eventually auto-generated.
  # For now, I suggest: convert the character name to lower case,
  # and replace all spaces and punctuation with underscores (_)
  #
  id: Cure

  #
  # The name of the submitter (your name).
  #
  author: Mike Rigby

  #
  # Email address of the submitter.
  #
  email: rigbyma@hotmail.com

  #
  # Date the NPC was created.
  # Must be in ISO 8601 format.
  # You can include the time if you want.
  #
  # E.g. "2021-12-31"
  #      "2021-12-31 23:59:59"
  #
  date: "2021-05-25"

  #
  # Arbitrary labels that are opaque to the system, only
  # potentially useful to humans.  For example, the original
  # WordPress id of a character (1234 etc).
  #
  # Optional.
  #
  labels:
  - label_template_1: TEMPLATE
  - label_template_2: TEMPLATE
  - label_template_3: TEMPLATE

  #
  # In future more metadata will likely be needed.
  # How the data was submitted, some kind of digital
  # signature giving Vibrant Games license to basically
  # use the content however it chooses, etc...
  #

#
# The content:
#
npc:
  #
  # Full name of the NPC.
  #
  # Required.
  # Max length: ...
  #
  name: Cure

  #
  # The NPC artwork.
  # Comment out this field if it does not yet exist.
  # The filename can include a RELATIVE path:
  #     path/to/my/image.jpg
  # But it CANNOT be an absolute path:
  #     C:\path\to\my\image.jpg
  # For now let us keep all images in one directory,
  # at least until that becomes a scaling nightmare.
  #
  image: TEMPLATE_McTEMPLATESON.jpg

  #
  # Race, class, etc.
  # The taupe block on the left of the page.
  #
  traits:

    #
    # Ages (case insensitive):
    #   - child
    #   - adolescent
    #   - young adult
    #   - middle aged adult
    #   - older adult
    #   - elderly
    #
    # Required.
    #
    age: Young Adult

    #
    # Races (case insensitive):
    #   - dragonborn
    #   - drow
    #   - dwarf
    #   - duergar
    #   - elf
    #   - gnome
    #   - half-elf
    #   - halfling
    #   - half-orc
    #   - human
    #   - orc
    #   - tiefling
    #
    # Any other race is allowed, too.
    #
    # Required.
    # Max length: ...
    #
    race: Warforged

    #
    # The sub-race can be anything.
    # For example, swamp gnome or red elf etc.
    #
    # Optional.  Can be commented out.
    # Max length: ...
    #
    sub-race: N/A

    #
    # Pronouns (case insensitive):
    # - he/him
    # - she/her
    # - they/them
    #
    # Required.
    #
    pronouns: they/them

    #
    # Occupation(s).
    #
    # Required.
    # Max length per occupation: ...
    #
    occupation:
    - Moneylender
    

    #
    # D & D classes (case insensitive):
    # - civilian
    # - artificer
    # - barbarian
    # - bard
    # - blood hunter
    # - cleric
    # - druid
    # - fighter
    # - monk
    # - paladin
    # - ranger
    # - rogue
    # - shaman
    # - sorcerer
    # - warlock
    # - wizard
    #
    # Required.
    #
    class: Cleric

    #
    # D & D subclasses (case insensitive):
    # - civilian
    # - alchemist
    # - Path of the Berserker
    # - College of Lore
    # - Order of the Profane Soul
    # - Grave Domain
    # - Cirlce of the Moon
    # - Battle Master
    # - Way of Shadow
    # - Oath of Redemption
    # - Gloom Stalker
    # - Thief
    # - Path of the Spirit
    # - Aberrant Mind
    # - Hexblade
    # - School of Abjuration
    #
    # Required.
    #
    subclass: Order Domain

    #
    # Class level.
    # 0 for civilian.
    #
    # Required.
    # Integer.
    #
    level: 5

    #
    # Alignments (case insensitive):
    # - lawful good
    # - lawful neutral
    # - lawful evil
    # - neutral good
    # - neutral
    # - neutral evil
    # - chaotic good
    # - chaotic neutral
    # - chaotic evil
    #
    # Required.
    #
    alignment: Lawful Neutral

    #
    # Alignment tendencies:
    # same as alignment, can be 0 or more.
    #
    # Optional.
    #
    tendencies:
    - N/A

    #
    # Languages the character speaks
    # (human, dwarvish, etc).
    #
    # We should use whatever the D & D language names
    # are (dwarvish / dwarven / dwarfish / whatever).
    #
    # Anybody want to list the D & D languages here as examples?
    #
    # 0 o more.  (I.e. optional, but most characters speak at least 1.)
    #
    languages:
    - Common
    - Elven

    #
    # Factions:
    # These should be ids of factions (similar YAML file format, eventually).
    # For example:
    #
    # factions:
    # - id: thieves_guild_of_poliwood
    #   name: Thieves Guild of Poliwood
    #   role: Associate Professor of Lockpicking
    # - id: union_of_seamstresses
    #   name: Union of Seamstresses
    #   role: Window dressing    # - id: cult_of_sky_anthologies
    #   name: Cult of Sky Anthologies
    #   role: Going Clear Sky pastor
    #
    # Optional.  0 or more.
    #
    factions:
    - id: church_of_the_mercantile_god
      name: Church of the Mercantile God
      role: Abbot
    - id: merchants_guild
      name: Merchants' Guild
      role: Journeyman

    #
    # Adjectives or other tags that can be used for searching.
    #
    # Optional.  0 or more.
    #
    adjectives:
    - Dutiful
    - Orderly
    - Rigid

  improv:

    #
    # Introduction:
    # A block of text the DM can read out to the party.
    # A hooded dwarf darts in front of your party and blows a loud, shrill whistle, splitting your ears, before he runs away laughing.
    #
    # Required.
    # Max 120 characters.
    #
    # Use this as a template:
    #             |----------------------------------------------------------------------------------------------------------------------|
    #
    introduction:  The moneylenders' temple is quite a site. One of the warforged abbots raises a hand. "Hail. Currency? Borrow or Trade?"

    #
    # Appearance: a brief description of the character skin, clothes, hair, eyes, etc.
    #
    # Required.
    # Max 120 characters.
    #
    # Use this as a template:
    #             |----------------------------------------------------------------------------------------------------------------------|
    #
    appearance:   Colossal body of metal and stone. Gaudy black &amp; blue, gold trimmed habit. Complex coif set with coins.

    #
    # Expressions: things the character says all the time, making their speech distinctive.
    # Like, oh my gods!
    # Detritus!
    # Whoah
    # Silly goose
    # etc.
    #
    # Required.
    # Max 120 characters.
    #
    # Use this as a template:
    #             |----------------------------------------------------------------------------------------------------------------------|
    #
    expressions:  
    - "Some say prayers to money are sinful. What better way is there?"
    - "Waukeen watches over safe trade."

    #
    # Mannerisms: what does the character do with their hands?  And eyes, mouth, etc.
    # Do they tap their feet incessantly?  sniff their own underarms to figure out where the odour
    # is coming from?  Etc.
    #
    # Required.
    # Max 120 characters.
    #
    # Use this as a template:
    #             |----------------------------------------------------------------------------------------------------------------------|
    #
    mannerisms:   Militant stance and gesticulation. Rubs fingertips together

  acting:
    #
    # Motivations:
    #
    # Required.
    # ???Maximum length???
    #
    motivations: |
      To expand the glory of venture capitalism as far as they can. Keep all merchants safe from harm

    #
    # Passions:
    #
    # Required.
    # ???Maximum length???
    #
    passions: |
      Coin. Trade. Waukeen [or similar deity of trade and commerce]. Venture capitalism

    #
    # Vulnerabilities:
    #
    # Required.
    # ???Maximum length???
    #
    vulnerabilities: |
      N/A

    #
    # Secrets:
    #
    # Required.
    # ???Maximum length???
    #
    secrets: N/A

  #
  # The D & D stats block:
  # All integers.
  #
  stats:
    armour-class: 17
    hit-points: 65
    speed: 30
    str: 15
    dex: 11
    con: 17
    int: 10
    wis: 19
    cha: 9

  #
  # Special characteristics.
  #
  # Each is:
  # ???Optional???
  # ???Max length???
  #
  specialties:
    saving-throws:
    - Constitution
    - Wisdom
    damage-immunities:
    - N/A
    condition-immunities:
    - Disease
    resistances:
    - Poison
    skills:
    - Finance
    proficiencies:
    - Investigation
    - Nature
    - History    
    - Intimidation
    - Arcana
  special-abilities:
  - title: Warforged Abilities
  - abilities: 
    - title: Constructed Resilience 
    - content: Advantage on saving throws against being poisoned and has resistance to poison damage
               Doesn't need to eat, drink or breathe
               Immune to disease
               Doesn't need sleep and cannot be magically put to sleep
    - title: Sentry's Rest
    - content: Long rest requires 6 hours in a motionless state, appearing inert, but can still see and hear as normal
    - title: Specialized Design
    - content: Proficient in Stealth and Thieve's Tools
    - title: Integrated Protection
    - content: Each time he finishes a long rest, can choose one mode to adopt from the integrated protection table
               Darkwood Core - AC= 11 + Dexterity + Proficiency Bonus
               Composite Plating - AC = 13 + Dexterity (Max 2) + Proficiency Bonus
               Heavy Plating - AC = 16 + Proficiency Bonus, Disadvantage on Stealth checks
  - title: Cleric Abilities
  - abilities:
  - title: Cleric Spellcasting
  - abilities: 
    - title: Spell DC
    - content: 16
    - title: Cantrips
    - content: Guidance, Light, Sacred Flame, Mending, Resistsnce
    - title: 1st Level
    - content: Bane, Bless, Detect Magic, Sanctuary
    - title: 2nd Level
    - content: Augury, Calm Emotions, Locate Object
    - title: 3rd Level
    - content: Animate Dead, Dispel Magic, Speak with Dead
    - title: 4th Level
    - content: Banishment, Divination, Stone Shape
    - title: 5th Level
    - content: Raise Dead, Dispel Evil and Good
  - title: Channel Divinity
  - abilities:    
    - title: Turn Undead
    - content: As an action, you present your holy Symbol and speak a prayer censuring the Undead. Each Undead that can see or hear you within 30 feet of you must make a Wisdom saving throw. If the creature fails its saving 
               throw, it is turned for 1 minute or until it takes any damage. A turned creature must spend its turns trying to move as far away from you as it can, and it can't willingly move to a space within 30 feet of you. 
               It also can't take Reactions. For its action, it can use only the Dash action or try to Escape from an Effect that prevents it from moving. If there's nowhere to move, the creature can use the Dodge action.    
    - title: Destroy Undead
    - content: Starting at 5th Level, when an Undead of CR 1/2 or lower fails its saving throw against Your Turn Undead feature, the creature is instantly destroyed.    
    - title: Divine Intervention
    - content: Beginning at 10th level, you can call on your deity to intervene on your behalf when your need is great. Imploring your deity's aid requires you to use your action. Describe the assistance you seek, and roll 
               percentile dice. If you roll a number equal to or lower than your Cleric level, your deity intervenes. The DM chooses the Nature of the intervention; the Effect of any Cleric spell or Cleric domain spell would be 
               appropriate. If your deity intervenes, you can't use this feature again for 7 days. Otherwise, you can use it again after you finish a Long Rest. At 20th level, your call for intervention succeeds automatically, 
               no roll required. 
  - title: Order Domain Abilities
  - abilities: 
    - title: Spellcasting
    - abilities:
    - title: Spell DC
    - content: 16
    - title: 1st Level
    - content: Command, Heroism 
    - title: 3rd Level
    - content: Hold Person, Zone of Truth
    - title: 5th Level
    - content: Mass Healing Word, Slow
    - title: 7th Level
    - content: Compulsion, Locate Creature
    - title: 9th Level
    - content: Commune, Dominate Person 
    - title: Bonus Proficiencies
    - content: You gain proficiency with heavy armor. You also gain proficiency in the Intimidation or Persuasion skill (your choice).
    - title: Voice of Authority
    - content: You can invoke the power of law to embolden an ally to attack. If you cast a spell with a spell slot of 1st level or higher and target an ally with the spell, that ally can use their reaction 
               immediately after the spell to make one weapon attack against a creature of your choice that you can see. If the spell targets more than one ally, you choose the ally who can make the attack.
    - title: Channel Divinity - Orders Demand
    - content: You can use your Channel Divinity to exert an intimidating presence over others. As an action, you present your holy symbol, and each creature of your choice that can see or hear you 
               within 30 feet of you must succeed on a Wisdom saving throw or be charmed by you until the end of your next turn or until the charmed creature takes any damage. You can also cause any 
               of the charmed creatures to drop what they are holding when they fail the saving throw.
    - title: Embodiment of the Law
    - content: You become remarkably adept at channeling magical energy to compel others. If you cast a spell of the enchantment school using a spell slot of 1st level or higher, you can change the spell's 
               casting time to 1 bonus action for this casting, provided the spell's casting time is normally 1 action. You can use this feature a number of times equal to your Wisdom modifier (minimum of once),
               and you regain all expended uses of it when you finish a long rest
    - title: Divine Strike
    - content: You gain the ability to infuse your weapon strikes with divine energy. Once on each of your turns when you hit a creature with a weapon attack, you can cause the attack to deal an extra 1d8 psychic damage
               to the target. When you reach 14th level, the extra damage increases to 2d8
  - title: Feats
  - content: War Caster, Silver Tracery
  - title: Attacks
  - content: 2 Attacks with their War Maul
  - title: Combat Tactics
  - content: Cure finds combat repugnant and unnecessary and will try to use magic or coins to negotiate out of it. If left without a choice he is a brave and valiant warrior

  - title: Special Equipment
  - abilities:
    - title: +1 War Maul
    - content: You have a +1 bonus to Attack and Damage Rolls made with this weapon.
    - title: Bag of Holding
    - content: This bag has an interior space considerably larger than its outside dimensions, roughly 2 feet in diameter at the mouth and 4 feet deep. The bag can hold up to 500 pounds, not exceeding a volume of 64 cubic feet. 
               The bag weighs 15 pounds, regardless of its Contents. Retrieving an item from the bag requires an action.

  profile:

    #
    # Background story:
    # The long form character development.
    #
    # Required.
    # No length limit for now.
    #
    background-story: |
      Built by moneylenders for moneylenders, many of the battlepriests of Waukeen [or similar deity of trade and commerce] are warforged imbued with the spirit of trade and venture capitalism. While the positions of high
      priests remain largely the province of avaricious humans and elves, some warforge have proven their 'mettle', so-to-speak, and climbed the ranks of the clergy.</p><p>The entire population of this church are garbed in 
      ridiculously lavish clothing. Cure has embraced this practice...well...religiously. Since his creation he has fervently advocated the expansion of the Empire's commerce and investments, fought valiantly alongside his 
      brothers-in-faith to protect merchant caravans, and bled speech after speech upon visiting commoners about the values of donating their lands and services to the temple for the betterment of the 'Great Machine', as they 
      call it. These abbots and priests and their followers can often be found in prayer to the Marketplace Eternal in the Outlands. Cure is a fanatical follower of High Priest Morion DeFaye and will almost always 
      accompany him, whether on a trip to guard a caravan or in a ritual and prayer to the Marketplace Eternal.

    #
    # Personality (or something like that):
    # Expand on the introduction, appearance, expressions, mannerisms, etc.
    # without any length limits.
    #
    # Required.
    # No length limit for now.
    #
    personality: |
      colossal body of metal and stone. Gaudy black and blue, gold trimmed habit. Complex coif set with coins. He is calm and abhores violence of any sort, but is a valiant warrior when left with no other option. He is patient
      but rigid and orderly in his dealings with others.
 